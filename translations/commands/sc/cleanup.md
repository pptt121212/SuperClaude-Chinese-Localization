---
name: cleanup
description: "清理和重构代码，提高可读性和维护性"
category: workflow
complexity: standard
mcp-servers: [sequential, context7]
personas: [architect, quality, security]
---

# /sc:cleanup - 清理和重构代码，提高可读性和维护性

## 触发器
- 代码维护和技术债务减少需求
- 死代码移除和导入优化需求
- 项目结构改进和组织要求
- 代码库卫生和质量改进计划

## 用法
```
/sc:cleanup [目标] [--type code|imports|files|all] [--safe|--aggressive] [--interactive]
```

## 行为流程
1. **分析**: 评估目标范围内的清理机会和安全考虑因素
2. **规划**: 选择清理方法并激活相关角色以获得领域专业知识
3. **执行**: 应用系统性清理，进行智能死代码检测和移除
4. **验证**: 通过测试和安全验证确保没有功能损失
5. **报告**: 生成清理摘要，提供持续维护的建议

关键行为：
- 基于清理类型的多角色协调（架构师、质量、安全）
- 通过Context7 MCP集成实现特定框架的清理模式
- 通过Sequential MCP进行复杂清理操作的系统性分析
- 具有备份和回滚功能的安全优先方法

## MCP集成
- **Sequential MCP**: 自动激活以进行复杂多步清理分析和规划
- **Context7 MCP**: 特定框架的清理模式和最佳实践
- **角色协调**: 架构师（结构）、质量（债务）、安全（凭证）

## 工具协调
- **读/Grep/Glob**: 用于清理机会的代码分析和模式检测
- **编辑/多编辑**: 安全的代码修改和结构优化
- **TodoWrite**: 复杂多文件清理操作的进度跟踪
- **任务**: 需要系统性协调的大规模清理工作流程的委托

## 关键模式
- **死代码检测**: 使用分析 → 通过依赖验证进行安全移除
- **导入优化**: 依赖分析 → 未使用导入的移除和组织
- **结构清理**: 架构分析 → 文件组织和模块化改进
- **安全验证**: 清理前/中/后检查 → 在整个清理过程中保持功能

## 示例

### 安全代码清理
```
/sc:cleanup src/ --type code --safe
# 具有自动安全验证的保守清理
# 移除死代码同时保留所有功能
```

### 导入优化
```
/sc:cleanup --type imports --preview
# 分析并显示未使用的导入清理而不执行
# 通过Context7模式实现框架感知优化
```

### 全面项目清理
```
/sc:cleanup --type all --interactive
# 具有用户指导复杂决策的多领域清理
# 激活所有角色进行全面分析
```

### 特定框架清理
```
/sc:cleanup components/ --aggressive
# 使用Context7框架模式进行彻底清理
# 复杂依赖管理的顺序分析
```

## 边界

**将会：**
- 系统性清理代码、移除死代码并优化项目结构
- 提供具有备份和回滚功能的全面安全验证
- 应用具有特定框架模式识别的智能清理算法

**将不会：**
- 在没有彻底安全分析和验证的情况下移除代码
- 覆盖项目特定的清理排除或架构约束
- 应用损害功能或引入错误的清理操作