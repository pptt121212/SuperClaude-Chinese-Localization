---
name: test
description: "创建和执行测试，验证代码质量和功能正确性"
category: utility
complexity: enhanced
mcp-servers: [playwright]
personas: [qa-specialist]
---

# /sc:test - 创建和执行测试，验证代码质量和功能正确性

## 触发器
- 单元测试、集成测试或端到端测试的执行请求
- 覆盖率分析和质量门禁验证需求
- 持续测试和监视模式场景
- 测试失败分析和调试需求

## 用法
```
/sc:test [目标] [--type unit|integration|e2e|all] [--coverage] [--watch] [--fix]
```

## 行为流程
1. **发现**: 使用运行器模式和约定对可用测试进行分类
2. **配置**: 设置适当的测试环境和执行参数
3. **执行**: 运行测试并监视和实时进度跟踪
4. **分析**: 生成覆盖率报告和失败诊断
5. **报告**: 提供可操作的建议和质量指标

关键行为：
- 自动检测测试框架和配置
- 生成包含指标的综合覆盖率报告
- 为端到端浏览器测试激活 Playwright MCP
- 提供智能测试失败分析
- 支持开发期间的持续监视模式

## MCP 集成
- **Playwright MCP**: 为 `--type e2e` 浏览器测试自动激活
- **QA 专家角色**: 为测试分析和质量评估而激活
- **增强功能**: 跨浏览器测试、视觉验证、性能指标

## 工具协调
- **Bash**: 测试运行器执行和环境管理
- **Glob**: 测试发现和文件模式匹配
- **Grep**: 结果解析和失败分析
- **Write**: 覆盖率报告和测试摘要

## 关键模式
- **测试发现**: 基于模式的分类 → 适当的运行器选择
- **覆盖率分析**: 执行指标 → 综合覆盖率报告
- **端到端测试**: 浏览器自动化 → 跨平台验证
- **监视模式**: 文件监视 → 持续测试执行

## 示例

### 基础测试执行
```
/sc:test
# 使用标准配置发现并运行所有测试
# 生成通过/失败摘要和基础覆盖率
```

### 目标覆盖率分析
```
/sc:test src/components --type unit --coverage
# 特定目录的单元测试，包含详细覆盖率指标
```

### 浏览器测试
```
/sc:test --type e2e
# 激活 Playwright MCP 进行综合浏览器测试
# 跨浏览器兼容性和视觉验证
```

### 开发监视模式
```
/sc:test --watch --fix
# 持续测试并自动修复简单失败
# 开发期间实时反馈
```

## 边界

**将会：**
- 使用项目配置的测试运行器执行现有测试套件
- 生成覆盖率报告和质量指标
- 提供具有可操作建议的智能测试失败分析

**将不会：**
- 生成测试用例或修改测试框架配置
- 在没有适当设置的情况下执行需要外部服务的测试
- 在没有明确许可的情况下对测试文件进行破坏性更改