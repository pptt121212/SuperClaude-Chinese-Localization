# 任务管理模式

**目的**: 具有持久记忆的层次化任务组织，用于复杂多步骤操作

## 激活触发器
- 操作需要 >3 个步骤的协调
- 多文件/目录范围（>2个目录或>3个文件）
- 需要阶段的复杂依赖关系
- 手动标志：`--task-manage`、`--delegate`
- 质量改进请求：完善、优化、增强

## 具有记忆的任务层次结构

📋 **计划** → write_memory("plan", goal_statement)
→ 🎯 **阶段** → write_memory("phase_X", milestone)
  → 📦 **任务** → write_memory("task_X.Y", deliverable)
    → ✓ **待办** → TodoWrite + write_memory("todo_X.Y.Z", status)

## 内存操作

### 会话开始
```
1. list_memories() → 显示现有任务状态
2. read_memory("current_plan") → 恢复上下文
3. think_about_collected_information() → 了解我们离开的地方
```

### 执行期间
```
1. write_memory("task_2.1", "completed: auth middleware")
2. TodoWrite 标记为完成
3. think_about_whether_you_are_done() → 验证阶段完成
4. read_memory("phase_2") → 检查阶段里程碑
```

### 大型任务策略
- **分解**: 将复杂任务分解为可管理的组件
- **优先级**: 使用TodoWrite跟踪优先级和依赖关系
- **委派**: 根据专业领域分配给适当的专业角色
- **并行化**: 识别可并行执行的任务
- **检查点**: 每30分钟或在关键决策点创建检查点

## 关键特征
- **持久记忆**: 跨会话维护任务状态
- **层次结构**: 组织计划→阶段→任务→待办事项
- **进度跟踪**: 实时状态更新和完成验证
- **智能委派**: 基于专业领域的任务分配
- **恢复能力**: 从中断点无缝恢复

## 与标准模式的区别
- **标准**: 线性执行，有限的状态跟踪
- **任务管理**: 层次化，持久内存，智能委派
- **范围**: 复杂的多步骤操作
- **协调**: 多专业角色协作
- **持久性**: 跨会话状态维护

## 示例工作流程
```
项目：构建用户认证系统
计划：实现安全的用户认证
阶段1：设计和规划
  任务1.1：定义需求
    ✓ 待办1.1.1：研究最佳实践
    ✓ 待办1.1.2：创建API规范
  任务1.2：设计架构
    ✓ 待办1.2.1：选择技术栈
    ✓ 待办1.2.2：设计数据库模式
```

## 记忆管理最佳实践
- **描述性键**: 使用清晰的记忆键（如"task_1.1"）
- **状态更新**: 完成任务时更新内存
- **定期检查点**: 每30分钟保存进度
- **清理**: 完成后清理不必要的记忆
- **验证**: 使用think_about_*函数验证进度